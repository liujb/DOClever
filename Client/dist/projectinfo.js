webpackJsonp([8],{299:function(t,e,o){(function(t,e,n,a){var i=o(7),r=o(33),s=o(34),c=o(32),d=o(35),p=o(36),l=(o(11),o(22)),m=o(12),f=o(6);t.get("projectId")||(location.href="../project/project.html"),t.remove("snapshotId"),t.remove("snapshotDis"),t.remove("snapshotCreator"),t.remove("snapshotDate"),e.component("itemauto",l);var g=new e({el:"#app",data:{type:0,arrApply:[],showApply:!1,selProject:t.get("projectName")},store:m,mixins:[f],components:{mainnav:i,interface:r,setting:s,global:c,test:d,version:p},methods:{handleApply:function(e,o){n.startHud(),a.put("/project/handleapply",{id:t.get("projectId"),apply:e._id,state:o}).then(function(t){n.stopHud(),200==t.code?1==o?(e.handle=1,setTimeout(function(){location.href="../project/project.html"},1e3)):e.handle=2:(e.handle=3,n.notify(t.msg,0))})},querySearch:function(t,e){var o=this,i={name:""};o.session.teamId&&(i.team=o.session.teamId),a.get("/project/filterlist",i).then(function(t){if(200==t.code){var o=t.data.map(function(t){return{value:t.name,remark:"undefined"!=t.dis?t.dis:"",id:t._id,own:t.own,role:t.role}});e(o)}else n.notify(t.msg,0),e([])})},showAutoComplete:function(t){setTimeout(function(){t.target.nextSibling.focus()},100)},changeProject:function(e){t.set("projectId",e.id),t.set("projectName",e.value),m.state.lastBaseUrl="",location.reload()}},created:function(){var e=this;Promise.all([a.get("/project/interface",{id:t.get("projectId")}),a.get("/project/info",{id:t.get("projectId")}),a.get("/status/list",{id:t.get("projectId")}),a.get("/test/list",{project:t.get("projectId")}),a.get("/project/applylist",{id:t.get("projectId")}),a.get("/version/list",{project:t.get("projectId"),page:0})]).then(function(t){n.stopLoading();var o=t[0],a=t[1],i=t[2],r=t[3],s=t[4],c=t[5];if(200!=o.code)throw o.msg;if(m.dispatch("interface/getAllInterface",o.data),200!=a.code)throw a.msg;if(m.commit("setProject",a.data),200!=i.code)throw i.msg;if(m.commit("setStatus",i.data),200!=r.code)throw r.msg;if(m.state.event.$emit("initTest",r.data),0==m.state.role){if(200!=s.code)throw s.msg;s.data.forEach(function(t){t.handle=0}),e.arrApply=s.data,e.arrApply.length>0&&(e.showApply=!0)}if(200!=c.code)throw c.msg;m.state.event.$emit("initVersion",c.data),m.state.event.$emit("init")}).catch(function(t){n.stopLoading(),"string"==typeof t?n.notify(t,0):n.notify("获取失败",0)})},mounted:function(){document.getElementById("projectChange").getElementsByTagName("input")[0].readOnly=!0}});window.vueObj=g,n.ready(function(){n.startLoading()})}).call(e,o(3),o(2),o(0),o(4))}},[299]);